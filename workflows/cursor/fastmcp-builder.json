{
  "name": "FastMCP App Builder",
  "description": "Cria aplica√ß√µes MCP seguindo OpenAI Apps SDK Guidelines",
  "version": "1.0.0",
  "triggers": {
    "commands": [
      "criar app mcp",
      "novo app chatgpt",
      "fastmcp app",
      "criar servidor mcp"
    ]
  },
  "steps": [
    {
      "id": "welcome",
      "type": "message",
      "content": "# üöÄ FastMCP App Builder\n\nVamos criar seu ChatGPT App seguindo guidelines FastMCP!\n\n**Princ√≠pios:**\n‚Ä¢ 1 tool = 1 intention\n‚Ä¢ Schemas expl√≠citos com Zod\n‚Ä¢ Respostas enxutas e previs√≠veis\n‚Ä¢ UX nativa do ChatGPT"
    },
    {
      "id": "step1_use_case",
      "type": "section",
      "title": "üìù PASSO 1: Use Case (OpenAI Framework)",
      "questions": [
        {
          "id": "app_problem",
          "prompt": "Qual problema seu app resolve?",
          "type": "text",
          "required": true
        },
        {
          "id": "app_user",
          "prompt": "Quem √© o usu√°rio-alvo?",
          "type": "text",
          "required": true
        },
        {
          "id": "app_name",
          "prompt": "Nome do seu app:",
          "type": "text",
          "required": true,
          "validation": {
            "pattern": "^[a-z0-9-]+$",
            "message": "Use kebab-case (ex: clima-diario)"
          }
        },
        {
          "id": "app_description",
          "prompt": "Descri√ß√£o curta (1 linha):",
          "type": "text",
          "required": true
        }
      ]
    },
    {
      "id": "step1_ui",
      "type": "section",
      "title": "üé® Interface Visual (UI Guidelines)",
      "questions": [
        {
          "id": "has_ui",
          "prompt": "O app ter√° interface visual?",
          "type": "boolean",
          "default": false
        }
      ],
      "conditionalSteps": [
        {
          "condition": "has_ui === true",
          "questions": [
            {
              "id": "ui_type",
              "prompt": "Tipo de interface:",
              "type": "select",
              "options": [
                {
                  "value": "widget",
                  "label": "Widget React (cards, listas, gr√°ficos)"
                },
                {
                  "value": "canvas",
                  "label": "Canvas (visualiza√ß√µes customizadas)"
                },
                {
                  "value": "form",
                  "label": "Form (entrada de dados)"
                },
                {
                  "value": "mixed",
                  "label": "Mista (combina√ß√£o)"
                }
              ]
            },
            {
              "id": "ui_components",
              "prompt": "Que componentes precisa? (ex: tabela, gr√°fico, formul√°rio)",
              "type": "text"
            },
            {
              "id": "use_ui_agent",
              "prompt": "Criar agente especializado em UI Guidelines?",
              "type": "boolean",
              "default": true,
              "help": "Agente que garante: widgets nativos, design responsivo, acessibilidade, performance <100ms"
            }
          ]
        }
      ]
    },
    {
      "id": "step2_tools",
      "type": "section",
      "title": "üîß PASSO 2: Tools (Capabilities)",
      "description": "FastMCP recomenda 1-3 tools m√°ximo. Cada tool = 1 a√ß√£o clara.",
      "questions": [
        {
          "id": "tool_count",
          "prompt": "Quantas tools? [1-3]:",
          "type": "number",
          "min": 1,
          "max": 3,
          "required": true
        }
      ],
      "loop": {
        "count": "{{tool_count}}",
        "questions": [
          {
            "id": "tool_name_{{index}}",
            "prompt": "Tool {{index}} - Nome (snake_case):",
            "type": "text",
            "required": true,
            "validation": {
              "pattern": "^[a-z_]+$",
              "message": "Use snake_case (ex: obter_clima)"
            }
          },
          {
            "id": "tool_desc_{{index}}",
            "prompt": "Tool {{index}} - Descri√ß√£o (o que faz?):",
            "type": "text",
            "required": true
          },
          {
            "id": "tool_params_{{index}}",
            "prompt": "Tool {{index}} - Par√¢metros (v√≠rgula ou 'nenhum'):",
            "type": "text",
            "default": "nenhum"
          }
        ]
      }
    },
    {
      "id": "step3_agents",
      "type": "section",
      "title": "ü§ñ PASSO 3: Agentes (Orchestration)",
      "questions": [
        {
          "id": "use_agents",
          "prompt": "Usar sistema de agentes?",
          "type": "boolean",
          "default": false
        }
      ],
      "conditionalSteps": [
        {
          "condition": "use_agents === true && use_ui_agent === true",
          "message": "‚úì UIGuidelinesAgent adicionado automaticamente"
        },
        {
          "condition": "use_agents === true",
          "questions": [
            {
              "id": "extra_agent_count",
              "prompt": "Quantos agentes adicionais? [0-3]:",
              "type": "number",
              "min": 0,
              "max": 3
            }
          ],
          "loop": {
            "count": "{{extra_agent_count}}",
            "questions": [
              {
                "id": "agent_name_{{index}}",
                "prompt": "Agente {{index}} - Nome:",
                "type": "text",
                "required": true
              },
              {
                "id": "agent_role_{{index}}",
                "prompt": "Agente {{index}} - Fun√ß√£o/especialidade:",
                "type": "text",
                "required": true
              }
            ]
          }
        }
      ]
    },
    {
      "id": "summary",
      "type": "message",
      "content": "# üìã RESUMO DO SEU APP\n\n**App:** {{app_name}}\n**Problema:** {{app_problem}}\n**Usu√°rio:** {{app_user}}\n**Descri√ß√£o:** {{app_description}}\n\n{{#if has_ui}}\n**Interface:** Sim\n  Tipo: {{ui_type}}\n  Componentes: {{ui_components}}\n  {{#if use_ui_agent}}‚úì Com agente de UI Guidelines{{/if}}\n{{/if}}\n\n**Tools ({{tool_count}}):**\n{{#each tools}}\n  {{inc @index}}. {{this.name}} - {{this.description}}\n     {{#if this.params !== 'nenhum'}}Par√¢metros: {{this.params}}{{/if}}\n{{/each}}\n\n{{#if use_agents}}\n**Agentes ({{agents.length}}):**\n{{#each agents}}\n  {{inc @index}}. {{this.name}} - {{this.role}}\n{{/each}}\n{{/if}}"
    },
    {
      "id": "confirm",
      "type": "confirmation",
      "prompt": "Confirmar e gerar c√≥digo?",
      "cancelMessage": "‚ùå Gera√ß√£o cancelada."
    },
    {
      "id": "generate_code",
      "type": "action",
      "action": "runCommand",
      "command": "mkdir -p apps/{{app_name}}/src && echo 'Criando estrutura...'"
    },
    {
      "id": "generate_server",
      "type": "action",
      "action": "createFile",
      "template": "../../templates/openai-compliant-server.ts",
      "output": "apps/{{app_name}}/src/index.ts",
      "variables": {
        "APP_NAME": "{{app_name}}",
        "APP_DESCRIPTION": "{{app_description}}",
        "TOOLS": "{{tools}}",
        "AGENTS": "{{agents}}"
      }
    },
    {
      "id": "generate_package",
      "type": "action",
      "action": "createFile",
      "output": "apps/{{app_name}}/package.json",
      "content": "{\n  \"name\": \"{{app_name}}\",\n  \"version\": \"1.0.0\",\n  \"description\": \"{{app_description}}\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"start\": \"node dist/index.js\",\n    \"dev\": \"tsx watch src/index.ts\",\n    \"validate:openai\": \"npx ts-node ../../builder/src/openai-compliance.ts\"\n  },\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.25.1\",\n    \"zod\": \"^4.2.1\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^22.10.2\",\n    \"typescript\": \"^5.7.2\",\n    \"tsx\": \"^4.19.2\"\n  }\n}"
    },
    {
      "id": "install_deps",
      "type": "action",
      "action": "runCommand",
      "command": "cd apps/{{app_name}} && npm install",
      "description": "Instalando depend√™ncias..."
    },
    {
      "id": "build",
      "type": "action",
      "action": "runCommand",
      "command": "cd apps/{{app_name}} && npm run build",
      "description": "Building servidor..."
    },
    {
      "id": "validate",
      "type": "action",
      "action": "runCommand",
      "command": "cd apps/{{app_name}} && npm run validate:openai",
      "description": "Validando compliance OpenAI..."
    },
    {
      "id": "success",
      "type": "message",
      "content": "# ‚úÖ App criado com sucesso!\n\nüìÅ **Localiza√ß√£o:** apps/{{app_name}}\n\n## Pr√≥ximos passos:\n\n1. `cd apps/{{app_name}}`\n2. `npm run dev` (testar localmente)\n3. `npm run validate:openai` (validar compliance)\n4. `../../deploy-fastmcp.sh local` (deploy)\n\n## üìö Documenta√ß√£o:\n\n- README.md (instru√ß√µes de uso)\n- ../../COMPLETE_GUIDE.md (guia completo)\n- ../../OPENAI_GUIDELINES.md (compliance)\n\nüéâ **Seu app segue 100% as OpenAI Apps SDK Guidelines!**"
    }
  ],
  "metadata": {
    "author": "FastMCP Builder",
    "tags": ["mcp", "openai", "fastmcp", "chatgpt", "apps-sdk"],
    "requirements": {
      "node": ">=18.0.0",
      "npm": ">=8.0.0"
    },
    "references": [
      "https://developers.openai.com/apps-sdk/plan/use-case",
      "https://developers.openai.com/apps-sdk/build/mcp-server",
      "https://developers.openai.com/apps-sdk/concepts/ui-guidelines",
      "https://developers.openai.com/apps-sdk/deploy"
    ]
  }
}
